"use strict";!function(){function t(t,e){function n(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=e,r=n;y.width.toString().indexOf("%")>0||y.height.toString().indexOf("%")>0?(o=Math.round(t.offsetWidth/100*parseInt(y.width)),r=Math.round(o/100*parseInt(y.height))):(o=parseInt(y.width),r=parseInt(y.height)),o>=e&&(o=e),r>=n&&(r=n),w={x:o/2,y:r/2},C.x=y.speed/w.x,C.y=y.speed/w.y,x=o>=r?r/100*parseInt(y.radius):o/100*parseInt(y.radius),1>x&&(x=1),g=x/2,g<y.radiusMin&&(g=y.radiusMin,x=2*g),b.setAttribute("width",o),b.setAttribute("height",r),y.bgDraw&&(A.setAttribute("width",o),A.setAttribute("height",r)),i(g)}function i(t){for(var e=0,n=P.length;n>e;e++)o(P[e],t)}function o(t,e){var n=t.vectorPosition.x-z.x,i=t.vectorPosition.y-z.y,o=t.vectorPosition.z-z.z,r=Math.sqrt(n*n+i*i+o*o);t.vectorPosition.x/=r,t.vectorPosition.y/=r,t.vectorPosition.z/=r,t.vectorPosition.x*=e,t.vectorPosition.y*=e,t.vectorPosition.z*=e}function r(t,e,n,i,o){var r={};return r.element=document.createElementNS(k,"text"),r.element.setAttribute("x",0),r.element.setAttribute("y",0),r.element.setAttribute("fill",y.fontColor),r.element.setAttribute("font-family",y.fontFamily),r.element.setAttribute("font-size",y.fontSize),r.element.setAttribute("font-weight",y.fontWeight),r.element.setAttribute("font-style",y.fontStyle),r.element.setAttribute("font-stretch",y.fontStretch),r.element.setAttribute("text-anchor","middle"),r.element.textContent=y.fontToUpperCase?e.label.toUpperCase():e.label,r.link=document.createElementNS(k,"a"),r.link.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.url),r.link.setAttribute("target",e.target),r.link.addEventListener("mouseover",d,!0),r.link.addEventListener("mouseout",f,!0),r.link.appendChild(r.element),r.index=t,r.mouseOver=!1,r.vectorPosition={x:n,y:i,z:o},r.vector2D={x:0,y:0},b.appendChild(r.link),r}function s(){for(var t=1,e=y.entries.length+1;e>t;t++){var n=Math.acos((2*t-1)/e-1),i=Math.sqrt(e*Math.PI)*n,o=Math.cos(i)*Math.sin(n),s=Math.sin(i)*Math.sin(n),a=Math.cos(n),u=r(t-1,y.entries[t-1],o,s,a);P.push(u)}}function a(t){for(var e=0,n=P.length;n>e;e++){var i=P[e];if(i.element.getAttribute("x")===t.getAttribute("x")&&i.element.getAttribute("y")===t.getAttribute("y"))return i}}function u(t){for(var e=a(t),n=0,i=P.length;i>n;n++){var o=P[n];o.index===e.index?o.mouseOver=!0:o.mouseOver=!1}}function c(){var t=C.x*M.x-y.speed,e=y.speed-C.y*M.y,n=t*D,i=e*D;O.sx=Math.sin(n),O.cx=Math.cos(n),O.sy=Math.sin(i),O.cy=Math.cos(i);for(var o=0,r=P.length;r>o;o++){var s=P[o];if(S){var a=s.vectorPosition.x,u=s.vectorPosition.y*O.sy+s.vectorPosition.z*O.cy;s.vectorPosition.x=a*O.cx+u*O.sx,s.vectorPosition.y=s.vectorPosition.y*O.cy+s.vectorPosition.z*-O.sy,s.vectorPosition.z=a*-O.sx+u*O.cx}var c=y.fov/(y.fov+s.vectorPosition.z);s.vector2D.x=s.vectorPosition.x*c+w.x,s.vector2D.y=s.vectorPosition.y*c+w.y,s.element.setAttribute("x",s.vector2D.x),s.element.setAttribute("y",s.vector2D.y);var l;S?(l=(g-s.vectorPosition.z)/x)<y.opacityOut&&(l=y.opacityOut):(l=parseFloat(s.element.getAttribute("opacity")),l+=s.mouseOver?(y.opacityOver-l)/y.opacitySpeed:(y.opacityOut-l)/y.opacitySpeed),s.element.setAttribute("opacity",l)}P=P.sort(function(t,e){return e.vectorPosition.z-t.vectorPosition.z})}function l(){requestAnimFrame(l),c()}function d(t){S=!1,u(t.target)}function f(t){S=!0}function h(t){M=v(b,t)}function v(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function m(t){n()}var y={entries:[],width:480,height:480,radius:"70%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:2,fontFamily:"Arial, sans-serif",fontSize:"15",fontColor:"#fff",fontWeight:"normal",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!1};if(void 0!==e)for(var p in e)e.hasOwnProperty(p)&&y.hasOwnProperty(p)&&(y[p]=e[p]);if(!y.entries.length)return!1;var g,x,w,b,A,P=[],S=!0,M={x:0,y:0},z={x:0,y:0,z:0},C={x:0,y:0},O={sx:0,cx:0,sy:0,cy:0},D=Math.PI/180,k="http://www.w3.org/2000/svg";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function(){b=document.createElementNS(k,"svg"),b.addEventListener("mousemove",h),t.appendChild(b),y.bgDraw&&(A=document.createElementNS(k,"rect"),A.setAttribute("x",0),A.setAttribute("y",0),A.setAttribute("fill",y.bgColor),b.appendChild(A)),s(),n(),l(),window.addEventListener("resize",m)}()}window.SVG3DTagCloud=t}(),"undefined"!=typeof jQuery&&function(t){t.fn.svg3DTagCloud=function(e){return this.each(function(){t.data(this,"plugin_SVG3DTagCloud")||t.data(this,"plugin_SVG3DTagCloud",new SVG3DTagCloud(this,e))})}}(jQuery);