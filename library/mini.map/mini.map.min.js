!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pagemap",[],t):"object"==typeof exports?exports.pagemap=t():e.pagemap=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){(function(t){e.exports=function(e,n){function r(e){return"rgba(0, 0, 0, 0.08)"}function o(e,t,n,r){return n.split(/\s+/).forEach(function(n){return e[t](n,r)})}function i(e,t,n){return o(e,"addEventListener",t,n)}function c(e,t,n){return o(e,"removeEventListener",t,n)}function u(e,t,n,r){return{x:e,y:t,w:n,h:r}}function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return u(e.x-t.x,e.y-t.y,e.w,e.h)}function f(e){var t=e.getBoundingClientRect();return{x:t.left+S.pageXOffset,y:t.top+S.pageYOffset}}function a(e){var t=f(e),n=t.x,r=t.y;return u(n+e.clientLeft,r+e.clientTop,e.clientWidth,e.clientHeight)}function s(e,t){t&&(L.beginPath(),L.rect(e.x,e.y,e.w,e.h),L.fillStyle=t,L.fill())}function p(e){Object.keys(e).forEach(function(t){var n=e[t];(function(e){return Array.from((_||T).querySelectorAll(e))})(t).forEach(function(e){s(l(function(e){var t=f(e),n=t.x,r=t.y;return u(n,r,e.offsetWidth,e.offsetHeight)}(e),x),n)})})}function d(){var t,n,r,o;x=_?(t=_,n=f(t),r=n.x,o=n.y,u(r+t.clientLeft-t.scrollLeft,o+t.clientTop-t.scrollTop,t.scrollWidth,t.scrollHeight)):u(0,0,E.scrollWidth,E.scrollHeight),b=_?a(_):u(S.pageXOffset,S.pageYOffset,E.clientWidth,E.clientHeight),w=W(x.w,x.h),function(t,n){e.width=t,e.height=n,e.style.width="".concat(t,"px"),e.style.height="".concat(n,"px")}(x.w*w,x.h*w),L.setTransform(1,0,0,1,0,0),L.clearRect(0,0,e.width,e.height),L.scale(w,w),s(l(x,x),P.back),p(P.styles),s(l(b,x),M?P.drag:P.view)}function h(t){t.preventDefault();var n=a(e),r=(t.pageX-n.x)/w-b.w*j,o=(t.pageY-n.y)/w-b.h*O;_?(_.scrollLeft=r,_.scrollTop=o):S.scrollTo(r,o),d()}function y(t){M=!1,e.style.cursor="pointer",H.style.cursor="auto",c(S,"mousemove",h),c(S,"mouseup",y),h(t)}function g(t){M=!0;var n=a(e),r=l(b,x);j=((t.pageX-n.x)/w-r.x)/r.w,O=((t.pageY-n.y)/w-r.y)/r.h,(j<0||1<j||O<0||1<O)&&(O=j=.5),e.style.cursor="crosshair",H.style.cursor="crosshair",i(S,"mousemove",h),i(S,"mouseup",y),h(t)}var v,m,x,b,w,j,O,S=t.window,T=S.document,E=T.documentElement,H=T.querySelector("body"),L=e.getContext("2d"),P=Object.assign({viewport:null,styles:{"header,footer,section,article":r(8),"h1,a":r(10),"h2,h3,h4":r(8)},back:r(2),view:r(5),drag:r(10),interval:null},n),W=(v=e.clientWidth,m=e.clientHeight,function(e,t){return Math.min(v/e,m/t)}),_=P.viewport,M=!1;return e.style.cursor="pointer",i(e,"mousedown",g),i(_||S,"load resize scroll",d),0<P.interval&&setInterval(function(){return d()},P.interval),d(),{redraw:d}}}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])});